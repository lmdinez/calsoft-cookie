{"version":3,"file":"calsoft-cookie.umd.js","sources":["ng://calsoft-cookie/lib/calsoft-cookie.service.ts","ng://calsoft-cookie/lib/calsoft-cookie.component.ts","ng://calsoft-cookie/lib/calsoft-cookie.module.ts"],"sourcesContent":["\nimport { Injectable, Inject, PLATFORM_ID, InjectionToken } from '@angular/core';\nimport { DOCUMENT, isPlatformBrowser } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CalsoftCookieService {\n  private readonly documentIsAccessible: boolean;\n  constructor(\n   // The type `Document` may not be used here. Although a fix is on its way,\n   // we will go with `any` for now to support Angular 2.4.x projects.\n   // Issue: https://github.com/angular/angular/issues/12631\n   // Fix: https://github.com/angular/angular/pull/14894\n   @Inject( DOCUMENT ) private document: any,\n   // Get the `PLATFORM_ID` so we can check if we're in a browser.\n   @Inject( PLATFORM_ID ) private platformId: InjectionToken<Object>,\n ) {\n   this.documentIsAccessible = isPlatformBrowser( this.platformId );\n }\n\n\n //  @param name Cookie name\n //  @returns {boolean}\n \n check( name: string ): boolean {\n   if ( !this.documentIsAccessible ) {\n     return false;\n   }\n\n   name = encodeURIComponent( name );\n\n   const regExp: RegExp = this.getCookieRegExp( name );\n   const exists: boolean = regExp.test( this.document.cookie );\n\n   return exists;\n }\n\n\n   // @param name Cookie name\n   // @returns {any}\n\n get( name: string ): string {\n   if ( this.documentIsAccessible && this.check( name ) ) {\n     name = encodeURIComponent( name );\n\n     const regExp: RegExp = this.getCookieRegExp( name );\n     const result: RegExpExecArray = regExp.exec( this.document.cookie );\n\n     return decodeURIComponent( result[ 1 ] );\n   } else {\n     return '';\n   }\n }\n\n   // @returns {}\n\n getAll(): {} {\n   if ( !this.documentIsAccessible ) {\n     return {};\n   }\n\n   const cookies: {} = {};\n   const document: any = this.document;\n\n   if ( document.cookie && document.cookie !== '' ) {\n     const split: Array<string> = document.cookie.split(';');\n\n     for ( let i = 0; i < split.length; i += 1 ) {\n       const currentCookie: Array<string> = split[ i ].split('=');\n\n       currentCookie[ 0 ] = currentCookie[ 0 ].replace( /^ /, '' );\n       cookies[ decodeURIComponent( currentCookie[ 0 ] ) ] = decodeURIComponent( currentCookie[ 1 ] );\n     }\n   }\n\n   return cookies;\n }\n\n //  @param name     Cookie name\n //  @param value    Cookie value\n //  @param expires  Number of days until the cookies expires or an actual `Date`\n //  @param path     Cookie path\n //  @param domain   Cookie domain\n //  @param secure   Secure flag\n //  @param sameSite OWASP samesite token `Lax` or `Strict`\n\n set(\n   name: string,\n   value: string,\n   expires?: number | Date,\n   path?: string,\n   domain?: string,\n   secure?: boolean,\n   sameSite?: 'Lax' | 'Strict'\n ): void {\n   if ( !this.documentIsAccessible ) {\n     return;\n   }\n\n   let cookieString: string = encodeURIComponent( name ) + '=' + encodeURIComponent( value ) + ';';\n\n   if ( expires ) {\n     if ( typeof expires === 'number' ) {\n       const dateExpires: Date = new Date( new Date().getTime() + expires * 1000 * 60 * 60 * 24 );\n\n       cookieString += 'expires=' + dateExpires.toUTCString() + ';';\n     } else {\n       cookieString += 'expires=' + expires.toUTCString() + ';';\n     }\n   }\n\n   if ( path ) {\n     cookieString += 'path=' + path + ';';\n   }\n\n   if ( domain ) {\n     cookieString += 'domain=' + domain + ';';\n   }\n\n   if ( secure ) {\n     cookieString += 'secure;';\n   }\n\n   if ( sameSite ) {\n     cookieString += 'sameSite=' + sameSite + ';';\n   }\n\n   this.document.cookie = cookieString;\n }\n\n\n //  @param name   Cookie name\n //  @param path   Cookie path\n //  @param domain Cookie domain\n \n delete( name: string, path?: string, domain?: string ): void {\n   if ( !this.documentIsAccessible ) {\n     return;\n   }\n\n   this.set( name, '', new Date('Thu, 01 Jan 1970 00:00:01 GMT'), path, domain );\n }\n\n //  @param path   Cookie path\n //   @param domain Cookie domain\n\n deleteAll( path?: string, domain?: string ): void {\n   if ( !this.documentIsAccessible ) {\n     return;\n   }\n\n   const cookies: any = this.getAll();\n\n   for ( const cookieName in cookies ) {\n     if ( cookies.hasOwnProperty( cookieName ) ) {\n       this.delete( cookieName, path, domain );\n     }\n   }\n }\n\n\n   // @param name Cookie name\n   // @returns {RegExp}\n\n private getCookieRegExp( name: string ): RegExp {\n   const escapedName: string = name.replace( /([\\[\\]\\{\\}\\(\\)\\|\\=\\;\\+\\?\\,\\.\\*\\^\\$])/ig, '\\\\$1' );\n\n   return new RegExp( '(?:^' + escapedName + '|;\\\\s*' + escapedName + ')=(.*?)(?:;|$)', 'g' );\n }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'lib-calsoft-cookie',\n  template: `\n    <p>\n      calsoft-cookie works!\n    </p>\n  `,\n  styles: []\n})\nexport class CalsoftCookieComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CalsoftCookieComponent } from './calsoft-cookie.component';\n\n\n\n@NgModule({\n  declarations: [CalsoftCookieComponent],\n  imports: [\n  ],\n  exports: [CalsoftCookieComponent]\n})\nexport class CalsoftCookieModule { }\n"],"names":["isPlatformBrowser","Injectable","Inject","DOCUMENT","InjectionToken","PLATFORM_ID","Component","NgModule"],"mappings":"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"}